Array.prototype.indexOf=function(n,t){for(var i=this.length,t=t<0?t+i<0?0:t+i:t||0;t<i&&this[t]!==n;t++);return i<=t?-1:t};$.fn.extend({flash:function(n){function o(n,t){return" "+n+'="'+t+'"'}function s(n,t){return'<param name="'+n+'" value="'+t+'" />'}var i,t,e,u=navigator.plugins,f,r;if(u&&u.length)f=u["Shockwave Flash"],f&&(i=!0,f.description&&(t=f.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))),u["Shockwave Flash 2.0"]&&(i=!0,t="2.0.0.11");else{try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(h){try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");t=[6,0,21];i=!0}catch(h){}try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(h){}}r!=null&&(t=r.GetVariable("$version").split(" ")[1].split(","),i=!0,e=!0)}$(this).each(function(){var l,a;if(i){var f=$(this),r=$.extend({id:f.attr("id"),"class":f.attr("class"),width:f.width(),height:f.height(),src:f.attr("href"),classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",pluginspace:"http://get.adobe.com/flashplayer",availattrs:["id","class","width","height","src"],availparams:["src","bgcolor","quality","allowscriptaccess","allowfullscreen","flashvars","wmode"],version:"9.0.24"},n),u=r.availattrs,h=r.availparams,v=r.version.split("."),c="<object";if(r.codebase||(r.codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+v.join(",")),r.express)for(l in t){if(parseInt(t[l])>parseInt(v[l]))break;parseInt(t[l])<parseInt(v[l])&&(r.src=r.express)}r.flashvars&&(r.flashvars=unescape($.param(r.flashvars)));u=e?u.concat(["classid","codebase"]):u.concat(["pluginspage"]);for(k in u)a=k==u.indexOf("src")?"data":u[k],c+=r[u[k]]?o(a,r[u[k]]):"";c+=">";for(k in h)a=k==h.indexOf("src")?"movie":h[k],c+=r[h[k]]?s(a,r[h[k]]):"";c+="<\/object>";f.replaceWith(c)}return this})}});$(document).ready(function(){WEVideoInitAll.Initialize()});var WEVideoInitAll={browser_type:1,chrome_late:!1,absURL:"",localAlertMsg:"",localAlertTimer:-1,noSupportedVideoMsg:"",linkMP4:0,linkWEBM:1,linkOGG:2,noHTML5:3,isFlashOk:!1,isQTOk:!1,detectPlugins:function(){var n;if(qtObj=!1,navigator.plugins&&navigator.plugins.length){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var s=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",h=navigator.plugins["Shockwave Flash"+s].description,i=h.split(" "),f=i[2].split("."),e=f[0],c=f[1],o=i[3]!=""?i[3].split("r"):i[4].split("r"),l=o[1]>0?o[1]:0,a=e+"."+c+"."+l;this.isFlashOk=e>=10}else this.isFlashOk=!1;for(n=0;n<navigator.plugins.length;n++)if(navigator.plugins[n].name&&navigator.plugins[n].name.indexOf("QuickTime")>-1){this.isQTOk=!0;break}}else{var t=null,r=!1,u=[0,0,0];try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(v){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");u=[6,0,21];r=!0}catch(v){}try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(v){}}try{t!=null&&(u=t.GetVariable("$version").split(" ")[1].split(","),r=!0);r&&u[0]>=10&&(this.isFlashOk=!0)}catch(v){}this.isQTOk=!1}},SupportedMode:function(n,t){var i,r,u,f;if(!n)return this.noHTML5;try{if(i=n[0],r=t[this.linkMP4]?i.canPlayType("video/mp4").replace(/no/i,""):!1,r)return this.linkMP4;if(u=t[this.linkWEBM]?i.canPlayType("video/webm").replace(/no/i,""):!1,u)return this.linkWEBM;if(f=t[this.linkOGG]?i.canPlayType("video/ogg").replace(/no/i,""):!1,f)return this.linkOGG}catch(e){}return this.noHTML5},Initialize:function(){var c,s,i,r,t,o;try{var h=$.browser.version,e=0,u="";this.browser_type=$.browser.mozilla?0:$.browser.opera?0:$.browser.msie?h>"9"||h<"6"?2:3:$.browser.safari?2:1;c=this.browser_type!=3;this.chrome_late=!1;u=navigator.userAgent||"";s=" chrome/";e=u.toLowerCase().indexOf(s);e>=0&&(e+=s.length,u=u.substr(e,3).split(".")[0],this.chrome_late=parseInt(u)>16);var a=navigator.platform.toLowerCase().indexOf("iphone")!=-1,v=navigator.platform.toLowerCase().indexOf("ipod")!=-1,y=navigator.userAgent.match(/iPad/i)!=null,p=a||v||y;p&&(this.browser_type=1);this.detectPlugins();for(Elem in OEConfWEVideo)if(i=$("#"+Elem),i&&(i=i.find(".ContainerVideoHTML5:first")||i),$elem=i?i.find(".TagVideoHTML5"):null,$elem){var n=[],f="",l=0;if(n=OEConfWEVideo[Elem].Links,r=OEConfWEVideo[Elem].ExportValues,r&&(r=r.split("##")),r&&r.length>1&&(this.localAlertMsg=r[0],this.noSupportedVideoMsg=r[1]),n){for(t=0;t<n.length;t++)n[t]&&n[t]!="null"&&(n[t]=OE.Common.Link.getPath(n[t])||"",n[t]&&(f=n[t]));while(n.length<=this.noHTML5)n.push("");n[this.noHTML5]=n[this.linkMP4];o=this.SupportedMode($elem,n);this.browser_type==1&&(o=this.linkMP4);l=o;f=n[l]||f;f&&this.SetUpVideoElement($elem,i,f,o,c,n[this.noHTML5])}}}catch(w){}},SetUpVideoElement:function(n,t,i,r,u,f){i=encodeURI(i);var e={width:t.width(),height:t.height(),poster:n.attr("poster"),browsercontrols:n.attr("controls"),custcontrols:n.attr("custcontrols"),autoplay:n.attr("autoplay"),loop:n.attr("loop"),muted:n.attr("muted")},s=this.browser_type==3,h=f&&(this.isFlashOk||this.isQTOk&&!s),o=!1;r!=this.noHTML5?(n.html(""),e.poster&&n.attr("src")&&encodeURI(decodeURI(n.attr("src")))==i||n.attr("src",i),o=!0):h&&(e.swfPlayer=n.attr("data-swfplayer")||n.attr("swfplayer"),o=this.TryFallbackFlash(t,i,e)||this.TryFallbackQT(t,i,e));o||(r==this.noHTML5&&u&&n.parent().html(n.html()),s&&t.find(".VidHTML5NotIE").hide(),t.find(".NoPluginMsgVideoHTML5").delay(1e3).fadeIn(1e3))},_ApplyAbsoluteURL:function(n){if(!n||n.lastIndexOf("//")>=0)return n;if(!this.absURL)if(this.absURL=document.URL.split("?")[0],this.absURL.indexOf("http")!=0)this.absURL="";else{var t=this.absURL.lastIndexOf("/"),i=this.absURL.lastIndexOf("//");t+1<this.absURL.length&&(t>i+1?this.absURL=this.absURL.substr(0,t+1):this.absURL+="/");this.absURL.lastIndexOf("/")+1!=this.absURL.length&&(this.absURL="")}return this.absURL+n},_hideFlashLocalNote:function(){$(".VidHTML5LocalNote").fadeOut(1640)},TryFallbackFlash:function(n,t,i){var f,u,r;if(!n||!t||!this.isFlashOk||(f=i.swfPlayer,!f)||(t=this._ApplyAbsoluteURL(t),u=n.parent(),r={vdo:t,sound:"50",autoplay:"false"},i.poster&&(r.splashscreen=this._ApplyAbsoluteURL(i.poster)),i.autoplay&&(r.autoplay="true"),i.muted&&(r.sound="0"),$.browser.msie?n.flash({src:f,allowfullscreen:"true",allowscriptaccess:"never",wmode:"transparent",width:"100%",height:"100%",flashvars:r}):n.flash({src:f,allowfullscreen:"true",allowscriptaccess:"never",wmode:"transparent",flashvars:r}),u.find(".TagVideoHTML5").length))return!1;if(this.chrome_late&&u.find(".ContainerVideoHTML5").attr("width","100%").attr("height","100%"),!this.absURL&&this.localAlertMsg){u.css("overflow","hidden");var s=Math.round(i.width*.88),e=4,o=90-e*2;$localAlert=$("<div />").css({position:"absolute",top:"44%",left:String(Math.round((100-o)*.5-e))+"%",width:String(o)+"%","z-index":"2",color:"#FF8000","background-color":"rgba(0,0,0,0.75)","font-size":"9px","line-height":"150%","text-align":"center",align:"center",valign:"top","padding-left":e+"%","padding-right":e+"%"}).attr("class","VidHTML5LocalNote");$localAlert.html(this.localAlertMsg);u.append($localAlert);this.localAlertTimer<0&&(this.localAlertTimer=setTimeout("WEVideoInitAll._hideFlashLocalNote();",4400))}return!0},TryFallbackQT:function(n,t,i){if(!n||!t||!this.isQTOk)return!1;var r="100%",u="100%",f='<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" standby="data is loading..." codebase="http://www.apple.com/qtactivex/qtplugin.cab"  width="'+r+'" height="'+u+'"><param name="scale" value="aspect" /><param name="type" value="video/quicktime" width="'+r+'" height="'+u+'" /><param name="controller" value="true" /><param name="autoplay" value="'+(i.autoplay?"true":"false")+'" /><param name="src" value="'+t+'" /><embed type="video/quicktime" scale="aspect" src="'+t+'" width="'+r+'"  height="'+u+'" autoplay="'+(i.autoplay?"true":"false")+'" controller="true" pluginspage="http://www.apple.com/quicktime/download/" /><\/object>';return n.html(f),!0}}